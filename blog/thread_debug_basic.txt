3:I[726,[],""]
5:I[334,[],""]
6:I[1995,["241","static/chunks/241-090afcbbc91120b4.js","82","static/chunks/82-21796b14c402b9d6.js","185","static/chunks/app/layout-cee6ead71a3d3707.js"],"ThemeProviders"]
7:I[1139,["241","static/chunks/241-090afcbbc91120b4.js","82","static/chunks/82-21796b14c402b9d6.js","185","static/chunks/app/layout-cee6ead71a3d3707.js"],""]
8:I[1802,["241","static/chunks/241-090afcbbc91120b4.js","82","static/chunks/82-21796b14c402b9d6.js","185","static/chunks/app/layout-cee6ead71a3d3707.js"],"KBarSearchProvider"]
9:I[4241,["241","static/chunks/241-090afcbbc91120b4.js","797","static/chunks/app/blog/%5B...slug%5D/page-11061fcd89c3312f.js"],""]
a:I[644,["241","static/chunks/241-090afcbbc91120b4.js","82","static/chunks/82-21796b14c402b9d6.js","185","static/chunks/app/layout-cee6ead71a3d3707.js"],"KBarButton"]
b:I[162,["241","static/chunks/241-090afcbbc91120b4.js","82","static/chunks/82-21796b14c402b9d6.js","185","static/chunks/app/layout-cee6ead71a3d3707.js"],""]
c:I[8474,["241","static/chunks/241-090afcbbc91120b4.js","82","static/chunks/82-21796b14c402b9d6.js","185","static/chunks/app/layout-cee6ead71a3d3707.js"],""]
4:["slug","thread_debug_basic","c"]
0:["Be7n0qxsm9vWOdCSMD4KE",[[["",{"children":["blog",{"children":[["slug","thread_debug_basic","c"],{"children":["__PAGE__?{\"slug\":[\"thread_debug_basic\"]}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","thread_debug_basic","c"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c1c99bc127b9f571.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"en-us","className":"__variable_587f35 scroll-smooth","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"apple-touch-icon","sizes":"76x76","href":"/static/favicons/apple-touch-icon.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/static/favicons/favicon-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/static/favicons/favicon-16x16.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/site.webmanifest"}],["$","link",null,{"rel":"mask-icon","href":"/static/favicons/safari-pinned-tab.svg","color":"#5bbad5"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#000000"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#fff"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}],["$","body",null,{"className":"bg-white text-black antialiased dark:bg-gray-950 dark:text-white","children":[["$","script",null,{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2567493227444081","crossOrigin":"anonymous"}],["$","$L6",null,{"children":[["$undefined","$undefined","$undefined",["$","$L7",null,{"async":true,"defer":true,"data-website-id":"$undefined","src":"https://analytics.umami.is/script.js"}],[["$","$L7",null,{"strategy":"afterInteractive","src":"https://www.googletagmanager.com/gtag/js?id=G-9LC7S6B5J9"}],["$","$L7",null,{"strategy":"afterInteractive","id":"ga-script","children":"\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', 'G-9LC7S6B5J9');\n        "}]]],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":["$","div",null,{"className":"flex h-screen flex-col justify-between font-sans","children":[["$","$L8",null,{"kbarConfig":{"searchDocumentsPath":"search.json"},"children":[["$","header",null,{"className":"flex items-center justify-between py-10","children":[["$","div",null,{"children":["$","$L9",null,{"href":"/","aria-label":"CPlusPlusThings","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"className":"mr-3","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","xmlnsXlink":"http://www.w3.org/1999/xlink","width":53.87,"height":43.61,"viewBox":"344.564 330.278 111.737 91.218","children":[["$","defs",null,{"children":[["$","linearGradient",null,{"id":"logo_svg__b","x1":420.97,"x2":420.97,"y1":331.28,"y2":418.5,"gradientUnits":"userSpaceOnUse","children":[["$","stop",null,{"offset":"0%","style":{"stopColor":"#06b6d4","stopOpacity":1}}],["$","stop",null,{"offset":"100%","style":{"stopColor":"#67e8f9","stopOpacity":1}}]]}],["$","linearGradient",null,{"id":"logo_svg__d","x1":377.89,"x2":377.89,"y1":331.28,"y2":418.5,"gradientUnits":"userSpaceOnUse","children":[["$","stop",null,{"offset":"0%","style":{"stopColor":"#06b6d4","stopOpacity":1}}],["$","stop",null,{"offset":"100%","style":{"stopColor":"#67e8f9","stopOpacity":1}}]]}],["$","path",null,{"id":"logo_svg__a","d":"M453.3 331.28v28.57l-64.66 58.65v-30.08z"}],["$","path",null,{"id":"logo_svg__c","d":"M410.23 331.28v28.57l-64.67 58.65v-30.08z"}]]}],["$","use",null,{"xlinkHref":"#logo_svg__a","fill":"url(#logo_svg__b)"}],["$","use",null,{"xlinkHref":"#logo_svg__c","fill":"url(#logo_svg__d)"}]]}]}],["$","div",null,{"className":"hidden h-6 text-2xl font-semibold sm:block","children":"CPlusPlusThings"}]]}]}]}],["$","div",null,{"className":"flex items-center space-x-4 leading-5 sm:space-x-6","children":[[["$","$L9",null,{"href":"/stories_things","className":"hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"C++"}],["$","$L9",null,{"href":"/projects","className":"hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"Projects"}],["$","$L9",null,{"href":"/blog","className":"hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"Blog"}],["$","$L9",null,{"href":"/tags","className":"hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"Tags"}],["$","$L9",null,{"href":"/about","className":"hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"About"}]],["$","$La",null,{"aria-label":"Search","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","className":"h-6 w-6 text-gray-900 dark:text-gray-100","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}]}]}],["$","$Lb",null,{}],["$","$Lc",null,{}]]}]]}],["$","main",null,{"className":"mb-auto","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"className":"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6","children":[["$","div",null,{"className":"space-x-2 pb-8 pt-6 md:space-y-5","children":["$","h1",null,{"className":"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14","children":"404"}]}],["$","div",null,{"className":"max-w-md","children":[["$","p",null,{"className":"mb-4 text-xl font-bold leading-normal md:text-2xl","children":"Sorry we couldn't find this page."}],["$","p",null,{"className":"mb-8","children":"But dont worry, you can find plenty of other things on our homepage."}],["$","$L9",null,{"href":"/","className":"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500","children":"Back to homepage"}]]}]]}],"notFoundStyles":[],"styles":null}]}]]}],["$","footer",null,{"children":["$","div",null,{"className":"mt-16 flex flex-col items-center","children":[["$","div",null,{"className":"mb-3 flex space-x-4","children":[["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"mailto:455954986@qq.com","children":[["$","span",null,{"className":"sr-only","children":"mail"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 20 20","className":"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6","children":[["$","path",null,{"d":"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}],["$","path",null,{"d":"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/Light-City","children":[["$","span",null,{"className":"sr-only","children":"github"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6","children":["$","path",null,{"d":"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}]}]]}]]}],["$","div",null,{"className":"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400","children":[["$","div",null,{"children":"light-city"}],["$","div",null,{"children":" • "}],["$","div",null,{"children":"© 2024"}],["$","div",null,{"children":" • "}],["$","$L9",null,{"href":"/","children":"CPlusPlusThings"}]]}]]}]}]]}]}]]}]]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c2fa761ca4164606.css","precedence":"next","crossOrigin":""}]],"$Ld"]]]]
e:I[2628,["241","static/chunks/241-090afcbbc91120b4.js","797","static/chunks/app/blog/%5B...slug%5D/page-11061fcd89c3312f.js"],""]
f:I[6765,["241","static/chunks/241-090afcbbc91120b4.js","797","static/chunks/app/blog/%5B...slug%5D/page-11061fcd89c3312f.js"],""]
2:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"Fundamentals of C/C++ Multithreading Programming\",\"datePublished\":\"2020-09-24T00:00:00.000Z\",\"dateModified\":\"2020-09-24T00:00:00.000Z\",\"description\":\"Troubleshooting multithreading issues with Linux commands\",\"image\":\"/static/images/twitter-card.png\",\"url\":\"https://light-city.github.io/blog/thread_debug_basic\",\"author\":[{\"@type\":\"Person\",\"name\":\"light-city\"}]}"}}],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$Le",null,{}],["$","article",null,{"children":["$","div",null,{"className":"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700","children":[["$","header",null,{"className":"pt-6 xl:pb-6","children":["$","div",null,{"className":"space-y-1 text-center","children":[["$","dl",null,{"className":"space-y-10","children":["$","div",null,{"children":[["$","dt",null,{"className":"sr-only","children":"Published on"}],["$","dd",null,{"className":"text-base font-medium leading-6 text-gray-500 dark:text-gray-400","children":["$","time",null,{"dateTime":"2020-09-24T00:00:00.000Z","children":"Thursday, September 24, 2020"}]}]]}]}],["$","div",null,{"children":["$","h1",null,{"className":"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14","children":"Fundamentals of C/C++ Multithreading Programming"}]}]]}]}],["$","div",null,{"className":"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0","children":[["$","dl",null,{"className":"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700","children":[["$","dt",null,{"className":"sr-only","children":"Authors"}],["$","dd",null,{"children":["$","ul",null,{"className":"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8","children":[["$","li","light-city",{"className":"flex items-center space-x-2","children":[["$","img",null,{"src":"/static/images/avatar.png","width":38,"height":38,"alt":"avatar","className":"h-10 w-10 rounded-full"}],["$","dl",null,{"className":"whitespace-nowrap text-sm font-medium leading-5","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"className":"text-gray-900 dark:text-gray-100","children":"light-city"}]]}]]}]]}]}]]}],["$","div",null,{"className":"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0","children":["$","div",null,{"className":"prose max-w-none pb-8 pt-10 dark:prose-invert","children":[["$","h1",null,{"id":"fundamentals-of-cc-multithreading-programming","children":[["$","a",null,{"href":"#fundamentals-of-cc-multithreading-programming","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"Fundamentals of C/C++ Multithreading Programming"]}],["$","details",null,{"open":true,"children":[["$","summary",null,{"className":"ml-6 pb-2 pt-2 text-xl font-bold","children":"Table of Contents"}],["$","div",null,{"className":"ml-6","children":["$","ul",null,{"className":"","children":[["$","li","0",{"children":[["$","a",null,{"href":"#fundamentals-of-cc-multithreading-programming","children":"Fundamentals of C/C++ Multithreading Programming"}],["$","ul",null,{"className":"","children":[["$","li","0",{"children":[["$","a",null,{"href":"#1-basic-issues","children":"1. Basic Issues"}],null]}],["$","li","1",{"children":[["$","a",null,{"href":"#2-basic-commands","children":"2. Basic Commands"}],null]}]]}]]}]]}]}]]}],["$","h2",null,{"id":"1-basic-issues","children":[["$","a",null,{"href":"#1-basic-issues","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"1. Basic Issues"]}],["$","ul",null,{"children":["$","li",null,{"children":["$","strong",null,{"children":"Will a thread crashing lead to process termination? Or does a crash of a thread within a process affect other threads?"}]}]}],["$","p",null,{"children":["Answer: Generally, each thread is an independent execution unit with its own context and stack. A crash in one thread does not affect other threads. However, typically, a thread crash might generate an error within the process, such as a ",["$","strong",null,{"children":"Segment Fault"}]," error in the Linux operating system. This error generates a signal, and the default action of the operating system for this signal is to terminate the process, resulting in the destruction of the entire process along with any other threads within it."]}],["$","ul",null,{"children":["$","li",null,{"children":["$","strong",null,{"children":"How to investigate high CPU usage in a Linux process?"}]}]}],["$","p",null,{"children":["In actual development, improper program logic can sometimes cause a thread to ",["$","strong",null,{"children":"spin"}]," (such as in an infinite loop), leading to high CPU usage for that process. This not only causes system lag but also wastes CPU resources. How can we locate and troubleshoot the thread causing high CPU usage?"]}],["$","p",null,{"children":["In Linux, we can use a combination of the ",["$","code",null,{"children":"pstack"}]," and ",["$","code",null,{"children":"top"}]," commands to troubleshoot such issues."]}],["$","h2",null,{"id":"2-basic-commands","children":[["$","a",null,{"href":"#2-basic-commands","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"2. Basic Commands"]}],["$","ul",null,{"children":["$","li",null,{"children":"pstack"}]}],["$","p",null,{"children":["In Linux systems, the ",["$","strong",null,{"children":"pstack"}]," command can be used to view the number of threads in a process and the call stack for each thread."]}],["$","$Lf",null,{"className":"language-js","children":["$","code",null,{"className":"code-highlight","children":["$","span",null,{"className":"code-line","children":"pstack pid\n"}]}]}],["$","p",null,{"children":["Set ",["$","strong",null,{"children":"pid"}]," to the ID of the process you want to examine."]}],["$","ul",null,{"children":["$","li",null,{"children":"top"}]}],["$","p",null,{"children":"It displays processes using the most CPU, finds the process ID with the highest CPU usage, and then uses:"}],["$","$Lf",null,{"className":"language-js","children":["$","code",null,{"className":"code-highlight","children":["$","span",null,{"className":"code-line","children":["top ",["$","span",null,{"className":"token operator","children":"-"}],"p pid\n"]}]}]}],["$","p",null,{"children":"Observe the CPU, memory, and load of the specified PID."}],["$","p",null,{"children":"Here is some information:"}],["$","$Lf",null,{"className":"language-js","children":["$","code",null,{"className":"code-highlight","children":[["$","span",null,{"className":"code-line","children":["top ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token number","children":"19"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"30"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"05"}]," up  ",["$","span",null,{"className":"token number","children":"6"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"15"}],["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"1"}]," user",["$","span",null,{"className":"token punctuation","children":","}],"  load average",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"0.85"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"0.71"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"0.61"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token literal-property property","children":"Tasks"}],["$","span",null,{"className":"token operator","children":":"}],"   ",["$","span",null,{"className":"token number","children":"1"}]," total",["$","span",null,{"className":"token punctuation","children":","}],"   ",["$","span",null,{"className":"token number","children":"0"}]," running",["$","span",null,{"className":"token punctuation","children":","}],"   ",["$","span",null,{"className":"token number","children":"1"}]," sleeping",["$","span",null,{"className":"token punctuation","children":","}],"   ",["$","span",null,{"className":"token number","children":"0"}]," stopped",["$","span",null,{"className":"token punctuation","children":","}],"   ",["$","span",null,{"className":"token number","children":"0"}]," zombie\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":"%"}],["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Cpu"}]}],["$","span",null,{"className":"token punctuation","children":"("}],"s",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}],"  ",["$","span",null,{"className":"token number","children":"8.1"}]," us",["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"2.9"}]," sy",["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"0.0"}]," ni",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"87.8"}]," id",["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"0.0"}]," wa",["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"0.0"}]," hi",["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"1.1"}]," si",["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"0.0"}]," st\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"KiB"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Mem"}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"20412976"}]," total",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"10960136"}]," free",["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"5416592"}]," used",["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"4036248"}]," buff",["$","span",null,{"className":"token operator","children":"/"}],"cache\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"KiB"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Swap"}],["$","span",null,{"className":"token operator","children":":"}],"  ",["$","span",null,{"className":"token number","children":"2097148"}]," total",["$","span",null,{"className":"token punctuation","children":","}],"  ",["$","span",null,{"className":"token number","children":"2097148"}]," free",["$","span",null,{"className":"token punctuation","children":","}],"        ",["$","span",null,{"className":"token number","children":"0"}]," used",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token number","children":"14315608"}]," avail ",["$","span",null,{"className":"token maybe-class-name","children":"Mem"}]," \n"]}]]}]}],["$","p",null,{"children":["$","strong",null,{"children":"The first line shows task queue information"}]}],["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"align":"center","children":"Task Queue Information"}],["$","th",null,{"align":"center","children":"Meaning"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"9:30:05"}],["$","td",null,{"align":"center","children":"Current time"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"6:15 min"}],["$","td",null,{"align":"center","children":"User online time"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"1 user"}],["$","td",null,{"align":"center","children":"Number of users"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"load average: 0.85, 0.71, 0.61"}],["$","td",null,{"align":"center","children":"System load, average length of the task queue. Average load 1 minute ago, 5 minutes ago, and 15 minutes ago"}]]}]]}]]}]}],["$","p",null,{"children":["$","strong",null,{"children":"The second line is process information"}]}],["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"align":"center","children":"Process Information"}],["$","th",null,{"align":"center","children":"Meaning"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"Tasks: 1 total"}],["$","td",null,{"align":"center","children":"Total number of processes"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"0 running"}],["$","td",null,{"align":"center","children":"Number of processes running"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"1 sleeping"}],["$","td",null,{"align":"center","children":"Number of processes sleeping"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"0 stopped"}],["$","td",null,{"align":"center","children":"Number of processes stopped"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"0 zombie"}],["$","td",null,{"align":"center","children":"Number of zombie processes"}]]}]]}]]}]}],["$","p",null,{"children":["$","strong",null,{"children":"The third line is CPU information"}]}],["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"align":"center","children":"CPU Information"}],["$","th",null,{"align":"center","children":"Meaning"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"8.1 us"}],["$","td",null,{"align":"center","children":"Percentage of CPU time spent in user space"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"2.9% sy"}],["$","td",null,{"align":"center","children":"Percentage of CPU time spent in kernel space"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"0.0% ni"}],["$","td",null,{"align":"center","children":"Percentage of CPU time spent on processes whose priority has been modified in user space"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"87.8% id"}],["$","td",null,{"align":"center","children":"Percentage of idle CPU time"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"0.0% wa"}],["$","td",null,{"align":"center","children":"Percentage of CPU time spent waiting for I/O"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"0.0% hi"}],["$","td",null,{"align":"center","children":"Hardware interrupts"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"1.1% si"}],["$","td",null,{"align":"center","children":"Software interrupts"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"0.0%st"}],["$","td",null,{"align":"center","children":"Real time"}]]}]]}]]}]}],["$","p",null,{"children":["$","strong",null,{"children":"The fourth and fifth lines are memory information."}]}],["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"align":"center","children":"Physical Memory Information"}],["$","th",null,{"align":"center","children":"Meaning"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"Mem: 20412976 total"}],["$","td",null,{"align":"center","children":"Total physical memory"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"5416592 used"}],["$","td",null,{"align":"center","children":"Total used physical memory"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"10960136 free"}],["$","td",null,{"align":"center","children":"Total free physical memory"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"4036248 buffers/cache"}],["$","td",null,{"align":"center","children":"Memory used for kernel buffers/cache"}]]}]]}]]}]}],["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"align":"center","children":"Swap Information"}],["$","th",null,{"align":"center","children":"Meaning"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"Swap: 2097148 total"}],["$","td",null,{"align":"center","children":"Total swap memory"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"0k used"}],["$","td",null,{"align":"center","children":"Used swap memory"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"2097148 free"}],["$","td",null,{"align":"center","children":"Free swap memory"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"center","children":"14315608 cached"}],["$","td",null,{"align":"center","children":"Cached swap memory"}]]}]]}]]}]}],["$","p",null,{"children":"How can we use the top command to locate CPU usage for each thread in a problem process?"}],["$","p",null,{"children":["Use ",["$","code",null,{"children":"-H"}],". The ",["$","code",null,{"children":"-H"}]," option of the top command displays the thread mode of each process."]}],["$","p",null,{"children":"For example:"}],["$","$Lf",null,{"className":"language-js","children":["$","code",null,{"className":"code-highlight","children":["$","span",null,{"className":"code-line","children":["top ",["$","span",null,{"className":"token operator","children":"-"}],"p ",["$","span",null,{"className":"token number","children":"2085"}]," ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"H"}],"\n"]}]}]}],["$","p",null,{"children":["$","img",null,{"alt":"","src":"https://raw.githubusercontent.com/Light-City/cloudimg/master/top.png"}]}],["$","p",null,{"children":"From the above image, it's evident that the thread with PID 2085 has the highest CPU usage. Next, pinpoint whether there are any abnormalities in the code of this thread causing excessive CPU usage."}],["$","p",null,{"children":"Combining the above pstack information, for instance:"}],["$","$Lf",null,{"className":"language-js","children":["$","code",null,{"className":"code-highlight","children":["$","span",null,{"className":"code-line","children":["pstack ",["$","span",null,{"className":"token number","children":"2085"}],"\n"]}]}]}],["$","p",null,{"children":"In the output of pstack for each thread, by cross-referencing our program's source code, we can identify whether there are logic blocks in that thread spending most of its time spinning. Then, modifying and optimizing these logics can resolve the issue of high CPU usage. In general, non-working threads should preferably be suspended using lock objects rather than spinning, as this can improve system resource utilization."}]]}]}],["$","footer",null,{"children":[["$","div",null,{"className":"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y","children":[["$","div",null,{"className":"py-4 xl:py-8","children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Tags"}],["$","div",null,{"className":"flex flex-wrap","children":[["$","$L9",null,{"href":"/tags/c","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"C++"}],["$","$L9",null,{"href":"/tags/c","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"C"}],["$","$L9",null,{"href":"/tags/debug","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"debug"}],["$","$L9",null,{"href":"/tags/multithreading","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"multithreading"}]]}]]}],["$","div",null,{"className":"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8","children":[["$","div",null,{"children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Previous Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L9",null,{"href":"/blog/go_helloworld","children":"C++ Project: Googletest Unit Testing"}]}]]}],["$","div",null,{"children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Next Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L9",null,{"href":"/blog/uorndered_map","children":"Exploring the STL Source Code: Unordered Containers"}]}]]}]]}]]}],["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L9",null,{"href":"/blog","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","aria-label":"Back to the blog","children":"← Back to the blog"}]}]]}]]}]]}]}]]}]]
d:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Fundamentals of C/C++ Multithreading Programming | CPlusPlusThings"}],["$","meta","3",{"name":"description","content":"Troubleshooting multithreading issues with Linux commands"}],["$","meta","4",{"name":"robots","content":"index, follow"}],["$","meta","5",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","6",{"rel":"canonical","href":"https://light-city.github.io/blog/thread_debug_basic"}],["$","link","7",{"rel":"alternate","type":"application/rss+xml","href":"https://light-city.github.io/feed.xml"}],["$","meta","8",{"property":"og:title","content":"Fundamentals of C/C++ Multithreading Programming"}],["$","meta","9",{"property":"og:description","content":"Troubleshooting multithreading issues with Linux commands"}],["$","meta","10",{"property":"og:url","content":"https://light-city.github.io/blog/thread_debug_basic"}],["$","meta","11",{"property":"og:site_name","content":"CPlusPlusThings"}],["$","meta","12",{"property":"og:locale","content":"en_US"}],["$","meta","13",{"property":"og:image","content":"https://light-city.github.io/static/images/twitter-card.png"}],["$","meta","14",{"property":"og:type","content":"article"}],["$","meta","15",{"property":"article:published_time","content":"2020-09-24T00:00:00.000Z"}],["$","meta","16",{"property":"article:modified_time","content":"2020-09-24T00:00:00.000Z"}],["$","meta","17",{"property":"article:author","content":"light-city"}],["$","meta","18",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","19",{"name":"twitter:title","content":"Fundamentals of C/C++ Multithreading Programming"}],["$","meta","20",{"name":"twitter:description","content":"Troubleshooting multithreading issues with Linux commands"}],["$","meta","21",{"name":"twitter:image","content":"https://light-city.github.io/static/images/twitter-card.png"}],["$","meta","22",{"name":"next-size-adjust"}]]
1:null
