<!DOCTYPE html><html lang="en-us" class="__variable_587f35 scroll-smooth"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/2d141e1a38819612-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/static/images/avatar.png"/><link rel="preload" as="image" href="https://raw.githubusercontent.com/Light-City/cloudimg/master/top.png"/><link rel="stylesheet" href="/_next/static/css/c2fa761ca4164606.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/c1c99bc127b9f571.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-9e30e38b6c2e2dab.js" crossorigin=""/><script src="/_next/static/chunks/0f778941-2b0b51992d41810a.js" async="" crossorigin=""></script><script src="/_next/static/chunks/78-099587a0dabef3bf.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-4a8559933a0b14bc.js" async="" crossorigin=""></script><script src="/_next/static/chunks/241-090afcbbc91120b4.js" async=""></script><script src="/_next/static/chunks/82-21796b14c402b9d6.js" async=""></script><script src="/_next/static/chunks/app/layout-cee6ead71a3d3707.js" async=""></script><script src="/_next/static/chunks/app/blog/%5B...slug%5D/page-11061fcd89c3312f.js" async=""></script><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2567493227444081" crossorigin="anonymous"></script><link rel="preload" href="https://analytics.umami.is/script.js" as="script"/><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-9LC7S6B5J9" as="script"/><title>Fundamentals of C/C++ Multithreading Programming | CPlusPlusThings</title><meta name="description" content="Troubleshooting multithreading issues with Linux commands"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://light-city.github.io/blog/thread_debug_basic"/><link rel="alternate" type="application/rss+xml" href="https://light-city.github.io/feed.xml"/><meta property="og:title" content="Fundamentals of C/C++ Multithreading Programming"/><meta property="og:description" content="Troubleshooting multithreading issues with Linux commands"/><meta property="og:url" content="https://light-city.github.io/blog/thread_debug_basic"/><meta property="og:site_name" content="CPlusPlusThings"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://light-city.github.io/static/images/twitter-card.png"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2020-09-24T00:00:00.000Z"/><meta property="article:modified_time" content="2020-09-24T00:00:00.000Z"/><meta property="article:author" content="light-city"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Fundamentals of C/C++ Multithreading Programming"/><meta name="twitter:description" content="Troubleshooting multithreading issues with Linux commands"/><meta name="twitter:image" content="https://light-city.github.io/static/images/twitter-card.png"/><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-950 dark:text-white"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between font-sans"><header class="flex items-center justify-between py-10"><div><a aria-label="CPlusPlusThings" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="53.87" height="43.61" viewBox="344.564 330.278 111.737 91.218"><defs><linearGradient id="logo_svg__b" x1="420.97" x2="420.97" y1="331.28" y2="418.5" gradientUnits="userSpaceOnUse"><stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1"></stop><stop offset="100%" style="stop-color:#67e8f9;stop-opacity:1"></stop></linearGradient><linearGradient id="logo_svg__d" x1="377.89" x2="377.89" y1="331.28" y2="418.5" gradientUnits="userSpaceOnUse"><stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1"></stop><stop offset="100%" style="stop-color:#67e8f9;stop-opacity:1"></stop></linearGradient><path id="logo_svg__a" d="M453.3 331.28v28.57l-64.66 58.65v-30.08z"></path><path id="logo_svg__c" d="M410.23 331.28v28.57l-64.67 58.65v-30.08z"></path></defs><use xlink:href="#logo_svg__a" fill="url(#logo_svg__b)"></use><use xlink:href="#logo_svg__c" fill="url(#logo_svg__d)"></use></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">CPlusPlusThings</div></div></a></div><div class="flex items-center space-x-4 leading-5 sm:space-x-6"><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/stories_things">C++</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/projects">Projects</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/blog">Blog</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/tags">Tags</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/about">About</a><button aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6 text-gray-900 dark:text-gray-100"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg></button><button aria-label="Toggle Menu" class="sm:hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-8 w-8 text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed left-0 top-0 z-10 h-full w-full transform bg-white opacity-95 duration-300 ease-in-out dark:bg-gray-950 dark:opacity-[0.98] translate-x-full"><div class="flex justify-end"><button class="mr-8 mt-11 h-8 w-8" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/">Home</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/stories_things">C++</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></header><main class="mb-auto"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Fundamentals of C/C++ Multithreading Programming","datePublished":"2020-09-24T00:00:00.000Z","dateModified":"2020-09-24T00:00:00.000Z","description":"Troubleshooting multithreading issues with Linux commands","image":"/static/images/twitter-card.png","url":"https://light-city.github.io/blog/thread_debug_basic","author":[{"@type":"Person","name":"light-city"}]}</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed bottom-8 right-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2020-09-24T00:00:00.000Z">Thursday, September 24, 2020</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Fundamentals of C/C++ Multithreading Programming</h1></div></div></header><div class="grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0"><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/avatar.png" width="38" height="38" alt="avatar" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">light-city</dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pb-8 pt-10 dark:prose-invert"><h1 id="fundamentals-of-cc-multithreading-programming"><a href="#fundamentals-of-cc-multithreading-programming" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Fundamentals of C/C++ Multithreading Programming</h1><details open=""><summary class="ml-6 pb-2 pt-2 text-xl font-bold">Table of Contents</summary><div class="ml-6"><ul class=""><li><a href="#fundamentals-of-cc-multithreading-programming">Fundamentals of C/C++ Multithreading Programming</a><ul class=""><li><a href="#1-basic-issues">1. Basic Issues</a></li><li><a href="#2-basic-commands">2. Basic Commands</a></li></ul></li></ul></div></details><h2 id="1-basic-issues"><a href="#1-basic-issues" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. Basic Issues</h2><ul><li><strong>Will a thread crashing lead to process termination? Or does a crash of a thread within a process affect other threads?</strong></li></ul><p>Answer: Generally, each thread is an independent execution unit with its own context and stack. A crash in one thread does not affect other threads. However, typically, a thread crash might generate an error within the process, such as a <strong>Segment Fault</strong> error in the Linux operating system. This error generates a signal, and the default action of the operating system for this signal is to terminate the process, resulting in the destruction of the entire process along with any other threads within it.</p><ul><li><strong>How to investigate high CPU usage in a Linux process?</strong></li></ul><p>In actual development, improper program logic can sometimes cause a thread to <strong>spin</strong> (such as in an infinite loop), leading to high CPU usage for that process. This not only causes system lag but also wastes CPU resources. How can we locate and troubleshoot the thread causing high CPU usage?</p><p>In Linux, we can use a combination of the <code>pstack</code> and <code>top</code> commands to troubleshoot such issues.</p><h2 id="2-basic-commands"><a href="#2-basic-commands" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. Basic Commands</h2><ul><li>pstack</li></ul><p>In Linux systems, the <strong>pstack</strong> command can be used to view the number of threads in a process and the call stack for each thread.</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">pstack pid
</span></code></pre></div><p>Set <strong>pid</strong> to the ID of the process you want to examine.</p><ul><li>top</li></ul><p>It displays processes using the most CPU, finds the process ID with the highest CPU usage, and then uses:</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">top <span class="token operator">-</span>p pid
</span></code></pre></div><p>Observe the CPU, memory, and load of the specified PID.</p><p>Here is some information:</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">top <span class="token operator">-</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">30</span><span class="token operator">:</span><span class="token number">05</span> up  <span class="token number">6</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">,</span>  <span class="token number">1</span> user<span class="token punctuation">,</span>  load average<span class="token operator">:</span> <span class="token number">0.85</span><span class="token punctuation">,</span> <span class="token number">0.71</span><span class="token punctuation">,</span> <span class="token number">0.61</span>
</span><span class="code-line"><span class="token literal-property property">Tasks</span><span class="token operator">:</span>   <span class="token number">1</span> total<span class="token punctuation">,</span>   <span class="token number">0</span> running<span class="token punctuation">,</span>   <span class="token number">1</span> sleeping<span class="token punctuation">,</span>   <span class="token number">0</span> stopped<span class="token punctuation">,</span>   <span class="token number">0</span> zombie
</span><span class="code-line"><span class="token operator">%</span><span class="token function"><span class="token maybe-class-name">Cpu</span></span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">:</span>  <span class="token number">8.1</span> us<span class="token punctuation">,</span>  <span class="token number">2.9</span> sy<span class="token punctuation">,</span>  <span class="token number">0.0</span> ni<span class="token punctuation">,</span> <span class="token number">87.8</span> id<span class="token punctuation">,</span>  <span class="token number">0.0</span> wa<span class="token punctuation">,</span>  <span class="token number">0.0</span> hi<span class="token punctuation">,</span>  <span class="token number">1.1</span> si<span class="token punctuation">,</span>  <span class="token number">0.0</span> st
</span><span class="code-line"><span class="token maybe-class-name">KiB</span> <span class="token maybe-class-name">Mem</span> <span class="token operator">:</span> <span class="token number">20412976</span> total<span class="token punctuation">,</span> <span class="token number">10960136</span> free<span class="token punctuation">,</span>  <span class="token number">5416592</span> used<span class="token punctuation">,</span>  <span class="token number">4036248</span> buff<span class="token operator">/</span>cache
</span><span class="code-line"><span class="token maybe-class-name">KiB</span> <span class="token maybe-class-name">Swap</span><span class="token operator">:</span>  <span class="token number">2097148</span> total<span class="token punctuation">,</span>  <span class="token number">2097148</span> free<span class="token punctuation">,</span>        <span class="token number">0</span> used<span class="token punctuation">.</span> <span class="token number">14315608</span> avail <span class="token maybe-class-name">Mem</span> 
</span></code></pre></div><p><strong>The first line shows task queue information</strong></p><div class="w-full overflow-x-auto"><table><thead><tr><th align="center">Task Queue Information</th><th align="center">Meaning</th></tr></thead><tbody><tr><td align="center">9:30:05</td><td align="center">Current time</td></tr><tr><td align="center">6:15 min</td><td align="center">User online time</td></tr><tr><td align="center">1 user</td><td align="center">Number of users</td></tr><tr><td align="center">load average: 0.85, 0.71, 0.61</td><td align="center">System load, average length of the task queue. Average load 1 minute ago, 5 minutes ago, and 15 minutes ago</td></tr></tbody></table></div><p><strong>The second line is process information</strong></p><div class="w-full overflow-x-auto"><table><thead><tr><th align="center">Process Information</th><th align="center">Meaning</th></tr></thead><tbody><tr><td align="center">Tasks: 1 total</td><td align="center">Total number of processes</td></tr><tr><td align="center">0 running</td><td align="center">Number of processes running</td></tr><tr><td align="center">1 sleeping</td><td align="center">Number of processes sleeping</td></tr><tr><td align="center">0 stopped</td><td align="center">Number of processes stopped</td></tr><tr><td align="center">0 zombie</td><td align="center">Number of zombie processes</td></tr></tbody></table></div><p><strong>The third line is CPU information</strong></p><div class="w-full overflow-x-auto"><table><thead><tr><th align="center">CPU Information</th><th align="center">Meaning</th></tr></thead><tbody><tr><td align="center">8.1 us</td><td align="center">Percentage of CPU time spent in user space</td></tr><tr><td align="center">2.9% sy</td><td align="center">Percentage of CPU time spent in kernel space</td></tr><tr><td align="center">0.0% ni</td><td align="center">Percentage of CPU time spent on processes whose priority has been modified in user space</td></tr><tr><td align="center">87.8% id</td><td align="center">Percentage of idle CPU time</td></tr><tr><td align="center">0.0% wa</td><td align="center">Percentage of CPU time spent waiting for I/O</td></tr><tr><td align="center">0.0% hi</td><td align="center">Hardware interrupts</td></tr><tr><td align="center">1.1% si</td><td align="center">Software interrupts</td></tr><tr><td align="center">0.0%st</td><td align="center">Real time</td></tr></tbody></table></div><p><strong>The fourth and fifth lines are memory information.</strong></p><div class="w-full overflow-x-auto"><table><thead><tr><th align="center">Physical Memory Information</th><th align="center">Meaning</th></tr></thead><tbody><tr><td align="center">Mem: 20412976 total</td><td align="center">Total physical memory</td></tr><tr><td align="center">5416592 used</td><td align="center">Total used physical memory</td></tr><tr><td align="center">10960136 free</td><td align="center">Total free physical memory</td></tr><tr><td align="center">4036248 buffers/cache</td><td align="center">Memory used for kernel buffers/cache</td></tr></tbody></table></div><div class="w-full overflow-x-auto"><table><thead><tr><th align="center">Swap Information</th><th align="center">Meaning</th></tr></thead><tbody><tr><td align="center">Swap: 2097148 total</td><td align="center">Total swap memory</td></tr><tr><td align="center">0k used</td><td align="center">Used swap memory</td></tr><tr><td align="center">2097148 free</td><td align="center">Free swap memory</td></tr><tr><td align="center">14315608 cached</td><td align="center">Cached swap memory</td></tr></tbody></table></div><p>How can we use the top command to locate CPU usage for each thread in a problem process?</p><p>Use <code>-H</code>. The <code>-H</code> option of the top command displays the thread mode of each process.</p><p>For example:</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">top <span class="token operator">-</span>p <span class="token number">2085</span> <span class="token operator">-</span><span class="token constant">H</span>
</span></code></pre></div><p><img alt="" src="https://raw.githubusercontent.com/Light-City/cloudimg/master/top.png"/></p><p>From the above image, it&#x27;s evident that the thread with PID 2085 has the highest CPU usage. Next, pinpoint whether there are any abnormalities in the code of this thread causing excessive CPU usage.</p><p>Combining the above pstack information, for instance:</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">pstack <span class="token number">2085</span>
</span></code></pre></div><p>In the output of pstack for each thread, by cross-referencing our program&#x27;s source code, we can identify whether there are logic blocks in that thread spending most of its time spinning. Then, modifying and optimizing these logics can resolve the issue of high CPU usage. In general, non-working threads should preferably be suspended using lock objects rather than spinning, as this can improve system resource utilization.</p></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/c">C++</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/c">C</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/debug">debug</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/multithreading">multithreading</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/go_helloworld">C++ Project: Googletest Unit Testing</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/uorndered_map">Exploring the STL Source Code: Unordered Containers</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" aria-label="Back to the blog" href="/blog">← Back to the blog</a></div></footer></div></div></article></section></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:455954986@qq.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/Light-City"><span class="sr-only">github</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>light-city</div><div> • </div><div>© 2024</div><div> • </div><a href="/">CPlusPlusThings</a></div></div></footer></div></section><script src="/_next/static/chunks/webpack-9e30e38b6c2e2dab.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2d141e1a38819612-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/c2fa761ca4164606.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:HL[\"/_next/static/css/c1c99bc127b9f571.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"5:I[1813,[],\"\"]\n8:I[726,[],\"\"]\na:I[334,[],\"\"]\nb:I[1995,[\"241\",\"static/chunks/241-090afcbbc91120b4.js\",\"82\",\"static/chunks/82-21796b14c402b9d6.js\",\"185\",\"static/chunks/app/layout-cee6ead71a3d3707.js\"],\"ThemeProviders\"]\nc:I[1139,[\"241\",\"static/chunks/241-090afcbbc91120b4.js\",\"82\",\"static/chunks/82-21796b14c402b9d6.js\",\"185\",\"static/chunks/app/layout-cee6ead71a3d3707.js\"],\"\"]\nd:I[1802,[\"241\",\"static/chunks/241-090afcbbc91120b4.js\",\"82\",\"static/chunks/82-21796b14c402b9d6.js\",\"185\",\"static/chunks/app/layout-cee6"])</script><script>self.__next_f.push([1,"ead71a3d3707.js\"],\"KBarSearchProvider\"]\ne:I[4241,[\"241\",\"static/chunks/241-090afcbbc91120b4.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-11061fcd89c3312f.js\"],\"\"]\nf:I[644,[\"241\",\"static/chunks/241-090afcbbc91120b4.js\",\"82\",\"static/chunks/82-21796b14c402b9d6.js\",\"185\",\"static/chunks/app/layout-cee6ead71a3d3707.js\"],\"KBarButton\"]\n10:I[162,[\"241\",\"static/chunks/241-090afcbbc91120b4.js\",\"82\",\"static/chunks/82-21796b14c402b9d6.js\",\"185\",\"static/chunks/app/layout-cee6ead71a3d3707.js\"],\"\"]\n11:I[8474,[\"241\""])</script><script>self.__next_f.push([1,",\"static/chunks/241-090afcbbc91120b4.js\",\"82\",\"static/chunks/82-21796b14c402b9d6.js\",\"185\",\"static/chunks/app/layout-cee6ead71a3d3707.js\"],\"\"]\n13:I[1480,[],\"\"]\n9:[\"slug\",\"thread_debug_basic\",\"c\"]\n14:[]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c2fa761ca4164606.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"Be7n0qxsm9vWOdCSMD4KE\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/thread_debug_basic\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"thread_debug_basic\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"thread_debug_basic\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"thread_debug_basic\",\"c\"],{\"children\":[\"__PAGE__\",{},[\"$L6\",\"$L7\",null]]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$9\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c1c99bc127b9f571.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,[\"$\",\"html\",null,{\"lang\":\"en-us\",\"className\":\"__variable_587f35 scroll-smooth\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"76x76\",\"href\":\"/static/favicons/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/static/favicons/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/static/favicons/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/static/favicons/site.webmanifest\"}],[\"$\",\"link\",null,{\"rel\":\"mask-icon\",\"href\":\"/static/favicons/safari-pinned-tab.svg\",\"color\":\"#5bbad5\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"#fff\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}],[\"$\",\"body\",null,{\"className\":\"bg-white text-black antialiased dark:bg-gray-950 dark:text-white\",\"children\":[[\"$\",\"script\",null,{\"async\":true,\"src\":\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2567493227444081\",\"crossOrigin\":\"anonymous\"}],[\"$\",\"$Lb\",null,{\"children\":[[\"$undefined\",\"$undefined\",\"$undefined\",[\"$\",\"$Lc\",null,{\"async\":true,\"defer\":true,\"data-website-id\":\"$undefined\",\"src\":\"https://analytics.umami.is/script.js\"}],[[\"$\",\"$Lc\",null,{\"strategy\":\"afterInteractive\",\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-9LC7S6B5J9\"}],[\"$\",\"$Lc\",null,{\"strategy\":\"afterInteractive\",\"id\":\"ga-script\",\"children\":\"\\n            window.dataLayer = window.dataLayer || [];\\n            function gtag(){dataLayer.push(arguments);}\\n            gtag('js', new Date());\\n            gtag('config', 'G-9LC7S6B5J9');\\n        \"}]]],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex h-screen flex-col justify-between font-sans\",\"children\":[[\"$\",\"$Ld\",null,{\"kbarConfig\":{\"searchDocumentsPath\":\"search.json\"},\"children\":[[\"$\",\"header\",null,{\"className\":\"flex items-center justify-between py-10\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"$Le\",null,{\"href\":\"/\",\"aria-label\":\"CPlusPlusThings\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mr-3\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlnsXlink\":\"http://www.w3.org/1999/xlink\",\"width\":53.87,\"height\":43.61,\"viewBox\":\"344.564 330.278 111.737 91.218\",\"children\":[[\"$\",\"defs\",null,{\"children\":[[\"$\",\"linearGradient\",null,{\"id\":\"logo_svg__b\",\"x1\":420.97,\"x2\":420.97,\"y1\":331.28,\"y2\":418.5,\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":\"0%\",\"style\":{\"stopColor\":\"#06b6d4\",\"stopOpacity\":1}}],[\"$\",\"stop\",null,{\"offset\":\"100%\",\"style\":{\"stopColor\":\"#67e8f9\",\"stopOpacity\":1}}]]}],[\"$\",\"linearGradient\",null,{\"id\":\"logo_svg__d\",\"x1\":377.89,\"x2\":377.89,\"y1\":331.28,\"y2\":418.5,\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":\"0%\",\"style\":{\"stopColor\":\"#06b6d4\",\"stopOpacity\":1}}],[\"$\",\"stop\",null,{\"offset\":\"100%\",\"style\":{\"stopColor\":\"#67e8f9\",\"stopOpacity\":1}}]]}],[\"$\",\"path\",null,{\"id\":\"logo_svg__a\",\"d\":\"M453.3 331.28v28.57l-64.66 58.65v-30.08z\"}],[\"$\",\"path\",null,{\"id\":\"logo_svg__c\",\"d\":\"M410.23 331.28v28.57l-64.67 58.65v-30.08z\"}]]}],[\"$\",\"use\",null,{\"xlinkHref\":\"#logo_svg__a\",\"fill\":\"url(#logo_svg__b)\"}],[\"$\",\"use\",null,{\"xlinkHref\":\"#logo_svg__c\",\"fill\":\"url(#logo_svg__d)\"}]]}]}],[\"$\",\"div\",null,{\"className\":\"hidden h-6 text-2xl font-semibold sm:block\",\"children\":\"CPlusPlusThings\"}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center space-x-4 leading-5 sm:space-x-6\",\"children\":[[[\"$\",\"$Le\",null,{\"href\":\"/stories_things\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"C++\"}],[\"$\",\"$Le\",null,{\"href\":\"/projects\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"Projects\"}],[\"$\",\"$Le\",null,{\"href\":\"/blog\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"Blog\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"Tags\"}],[\"$\",\"$Le\",null,{\"href\":\"/about\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"About\"}]],[\"$\",\"$Lf\",null,{\"aria-label\":\"Search\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"strokeWidth\":1.5,\"stroke\":\"currentColor\",\"className\":\"h-6 w-6 text-gray-900 dark:text-gray-100\",\"children\":[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"d\":\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"}]}]}],[\"$\",\"$L10\",null,{}],[\"$\",\"$L11\",null,{}]]}]]}],[\"$\",\"main\",null,{\"className\":\"mb-auto\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-x-2 pb-8 pt-6 md:space-y-5\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14\",\"children\":\"404\"}]}],[\"$\",\"div\",null,{\"className\":\"max-w-md\",\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-4 text-xl font-bold leading-normal md:text-2xl\",\"children\":\"Sorry we couldn't find this page.\"}],[\"$\",\"p\",null,{\"className\":\"mb-8\",\"children\":\"But dont worry, you can find plenty of other things on our homepage.\"}],[\"$\",\"$Le\",null,{\"href\":\"/\",\"className\":\"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500\",\"children\":\"Back to homepage\"}]]}]]}],\"notFoundStyles\":[],\"styles\":null}]}]]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"mt-16 flex flex-col items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-3 flex space-x-4\",\"children\":[[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"mailto:455954986@qq.com\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"mail\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 20 20\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z\"}],[\"$\",\"path\",null,{\"d\":\"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z\"}]]}]]}],[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/Light-City\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"github\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[\"$\",\"path\",null,{\"d\":\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"}]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400\",\"children\":[[\"$\",\"div\",null,{\"children\":\"light-city\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"div\",null,{\"children\":\"© 2024\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"$Le\",null,{\"href\":\"/\",\"children\":\"CPlusPlusThings\"}]]}]]}]}]]}]}]]}]]}]]}],null]],\"initialHead\":[false,\"$L12\"],\"globalErrorComponent\":\"$13\",\"missingSlots\":\"$W14\"}]]\n"])</script><script>self.__next_f.push([1,"15:I[2628,[\"241\",\"static/chunks/241-090afcbbc91120b4.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-11061fcd89c3312f.js\"],\"\"]\n16:I[6765,[\"241\",\"static/chunks/241-090afcbbc91120b4.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-11061fcd89c3312f.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"BlogPosting\\\",\\\"headline\\\":\\\"Fundamentals of C/C++ Multithreading Programming\\\",\\\"datePublished\\\":\\\"2020-09-24T00:00:00.000Z\\\",\\\"dateModified\\\":\\\"2020-09-24T00:00:00.000Z\\\",\\\"description\\\":\\\"Troubleshooting multithreading issues with Linux commands\\\",\\\"image\\\":\\\"/static/images/twitter-card.png\\\",\\\"url\\\":\\\"https://light-city.github.io/blog/thread_debug_basic\\\",\\\"author\\\":[{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"light-city\\\"}]}\"}}],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[[\"$\",\"$L15\",null,{}],[\"$\",\"article\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700\",\"children\":[[\"$\",\"header\",null,{\"className\":\"pt-6 xl:pb-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"space-y-1 text-center\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"space-y-10\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Published on\"}],[\"$\",\"dd\",null,{\"className\":\"text-base font-medium leading-6 text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2020-09-24T00:00:00.000Z\",\"children\":\"Thursday, September 24, 2020\"}]}]]}]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"h1\",null,{\"className\":\"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14\",\"children\":\"Fundamentals of C/C++ Multithreading Programming\"}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Authors\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8\",\"children\":[[\"$\",\"li\",\"light-city\",{\"className\":\"flex items-center space-x-2\",\"children\":[[\"$\",\"img\",null,{\"src\":\"/static/images/avatar.png\",\"width\":38,\"height\":38,\"alt\":\"avatar\",\"className\":\"h-10 w-10 rounded-full\"}],[\"$\",\"dl\",null,{\"className\":\"whitespace-nowrap text-sm font-medium leading-5\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Name\"}],[\"$\",\"dd\",null,{\"className\":\"text-gray-900 dark:text-gray-100\",\"children\":\"light-city\"}]]}]]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"prose max-w-none pb-8 pt-10 dark:prose-invert\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"fundamentals-of-cc-multithreading-programming\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#fundamentals-of-cc-multithreading-programming\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Fundamentals of C/C++ Multithreading Programming\"]}],[\"$\",\"details\",null,{\"open\":true,\"children\":[[\"$\",\"summary\",null,{\"className\":\"ml-6 pb-2 pt-2 text-xl font-bold\",\"children\":\"Table of Contents\"}],[\"$\",\"div\",null,{\"className\":\"ml-6\",\"children\":[\"$\",\"ul\",null,{\"className\":\"\",\"children\":[[\"$\",\"li\",\"0\",{\"children\":[[\"$\",\"a\",null,{\"href\":\"#fundamentals-of-cc-multithreading-programming\",\"children\":\"Fundamentals of C/C++ Multithreading Programming\"}],[\"$\",\"ul\",null,{\"className\":\"\",\"children\":[[\"$\",\"li\",\"0\",{\"children\":[[\"$\",\"a\",null,{\"href\":\"#1-basic-issues\",\"children\":\"1. Basic Issues\"}],null]}],[\"$\",\"li\",\"1\",{\"children\":[[\"$\",\"a\",null,{\"href\":\"#2-basic-commands\",\"children\":\"2. Basic Commands\"}],null]}]]}]]}]]}]}]]}],[\"$\",\"h2\",null,{\"id\":\"1-basic-issues\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#1-basic-issues\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"1. Basic Issues\"]}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Will a thread crashing lead to process termination? Or does a crash of a thread within a process affect other threads?\"}]}]}],[\"$\",\"p\",null,{\"children\":[\"Answer: Generally, each thread is an independent execution unit with its own context and stack. A crash in one thread does not affect other threads. However, typically, a thread crash might generate an error within the process, such as a \",[\"$\",\"strong\",null,{\"children\":\"Segment Fault\"}],\" error in the Linux operating system. This error generates a signal, and the default action of the operating system for this signal is to terminate the process, resulting in the destruction of the entire process along with any other threads within it.\"]}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"How to investigate high CPU usage in a Linux process?\"}]}]}],[\"$\",\"p\",null,{\"children\":[\"In actual development, improper program logic can sometimes cause a thread to \",[\"$\",\"strong\",null,{\"children\":\"spin\"}],\" (such as in an infinite loop), leading to high CPU usage for that process. This not only causes system lag but also wastes CPU resources. How can we locate and troubleshoot the thread causing high CPU usage?\"]}],[\"$\",\"p\",null,{\"children\":[\"In Linux, we can use a combination of the \",[\"$\",\"code\",null,{\"children\":\"pstack\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"top\"}],\" commands to troubleshoot such issues.\"]}],[\"$\",\"h2\",null,{\"id\":\"2-basic-commands\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#2-basic-commands\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"2. Basic Commands\"]}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":\"pstack\"}]}],[\"$\",\"p\",null,{\"children\":[\"In Linux systems, the \",[\"$\",\"strong\",null,{\"children\":\"pstack\"}],\" command can be used to view the number of threads in a process and the call stack for each thread.\"]}],[\"$\",\"$L16\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"pstack pid\\n\"}]}]}],[\"$\",\"p\",null,{\"children\":[\"Set \",[\"$\",\"strong\",null,{\"children\":\"pid\"}],\" to the ID of the process you want to examine.\"]}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":\"top\"}]}],[\"$\",\"p\",null,{\"children\":\"It displays processes using the most CPU, finds the process ID with the highest CPU usage, and then uses:\"}],[\"$\",\"$L16\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"top \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\"p pid\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":\"Observe the CPU, memory, and load of the specified PID.\"}],[\"$\",\"p\",null,{\"children\":\"Here is some information:\"}],[\"$\",\"$L16\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"top \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"19\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"05\"}],\" up  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"6\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"15\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" user\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  load average\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0.85\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0.71\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0.61\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token literal-property property\",\"children\":\"Tasks\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\"   \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" total\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"   \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\" running\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"   \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" sleeping\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"   \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\" stopped\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"   \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\" zombie\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"%\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Cpu\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"s\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"8.1\"}],\" us\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2.9\"}],\" sy\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0.0\"}],\" ni\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"87.8\"}],\" id\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0.0\"}],\" wa\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0.0\"}],\" hi\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1.1\"}],\" si\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0.0\"}],\" st\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"KiB\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Mem\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"20412976\"}],\" total\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"10960136\"}],\" free\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"5416592\"}],\" used\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"4036248\"}],\" buff\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"/\"}],\"cache\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"KiB\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Swap\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2097148\"}],\" total\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2097148\"}],\" free\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"        \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\" used\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"14315608\"}],\" avail \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Mem\"}],\" \\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"The first line shows task queue information\"}]}],[\"$\",\"div\",null,{\"className\":\"w-full overflow-x-auto\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"Task Queue Information\"}],[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"Meaning\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"9:30:05\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Current time\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"6:15 min\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"User online time\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"1 user\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Number of users\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"load average: 0.85, 0.71, 0.61\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"System load, average length of the task queue. Average load 1 minute ago, 5 minutes ago, and 15 minutes ago\"}]]}]]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"The second line is process information\"}]}],[\"$\",\"div\",null,{\"className\":\"w-full overflow-x-auto\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"Process Information\"}],[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"Meaning\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Tasks: 1 total\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Total number of processes\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"0 running\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Number of processes running\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"1 sleeping\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Number of processes sleeping\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"0 stopped\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Number of processes stopped\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"0 zombie\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Number of zombie processes\"}]]}]]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"The third line is CPU information\"}]}],[\"$\",\"div\",null,{\"className\":\"w-full overflow-x-auto\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"CPU Information\"}],[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"Meaning\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"8.1 us\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Percentage of CPU time spent in user space\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"2.9% sy\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Percentage of CPU time spent in kernel space\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"0.0% ni\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Percentage of CPU time spent on processes whose priority has been modified in user space\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"87.8% id\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Percentage of idle CPU time\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"0.0% wa\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Percentage of CPU time spent waiting for I/O\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"0.0% hi\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Hardware interrupts\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"1.1% si\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Software interrupts\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"0.0%st\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Real time\"}]]}]]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"The fourth and fifth lines are memory information.\"}]}],[\"$\",\"div\",null,{\"className\":\"w-full overflow-x-auto\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"Physical Memory Information\"}],[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"Meaning\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Mem: 20412976 total\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Total physical memory\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"5416592 used\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Total used physical memory\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"10960136 free\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Total free physical memory\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"4036248 buffers/cache\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Memory used for kernel buffers/cache\"}]]}]]}]]}]}],[\"$\",\"div\",null,{\"className\":\"w-full overflow-x-auto\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"Swap Information\"}],[\"$\",\"th\",null,{\"align\":\"center\",\"children\":\"Meaning\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Swap: 2097148 total\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Total swap memory\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"0k used\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Used swap memory\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"2097148 free\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Free swap memory\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"14315608 cached\"}],[\"$\",\"td\",null,{\"align\":\"center\",\"children\":\"Cached swap memory\"}]]}]]}]]}]}],[\"$\",\"p\",null,{\"children\":\"How can we use the top command to locate CPU usage for each thread in a problem process?\"}],[\"$\",\"p\",null,{\"children\":[\"Use \",[\"$\",\"code\",null,{\"children\":\"-H\"}],\". The \",[\"$\",\"code\",null,{\"children\":\"-H\"}],\" option of the top command displays the thread mode of each process.\"]}],[\"$\",\"p\",null,{\"children\":\"For example:\"}],[\"$\",\"$L16\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"top \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\"p \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2085\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"H\"}],\"\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"alt\":\"\",\"src\":\"https://raw.githubusercontent.com/Light-City/cloudimg/master/top.png\"}]}],[\"$\",\"p\",null,{\"children\":\"From the above image, it's evident that the thread with PID 2085 has the highest CPU usage. Next, pinpoint whether there are any abnormalities in the code of this thread causing excessive CPU usage.\"}],[\"$\",\"p\",null,{\"children\":\"Combining the above pstack information, for instance:\"}],[\"$\",\"$L16\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"pstack \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2085\"}],\"\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":\"In the output of pstack for each thread, by cross-referencing our program's source code, we can identify whether there are logic blocks in that thread spending most of its time spinning. Then, modifying and optimizing these logics can resolve the issue of high CPU usage. In general, non-working threads should preferably be suspended using lock objects rather than spinning, as this can improve system resource utilization.\"}]]}]}],[\"$\",\"footer\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y\",\"children\":[[\"$\",\"div\",null,{\"className\":\"py-4 xl:py-8\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Tags\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap\",\"children\":[[\"$\",\"$Le\",null,{\"href\":\"/tags/c\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"C++\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags/c\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"C\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags/debug\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"debug\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags/multithreading\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"multithreading\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Previous Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$Le\",null,{\"href\":\"/blog/go_helloworld\",\"children\":\"C++ Project: Googletest Unit Testing\"}]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Next Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$Le\",null,{\"href\":\"/blog/uorndered_map\",\"children\":\"Exploring the STL Source Code: Unordered Containers\"}]}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"pt-4 xl:pt-8\",\"children\":[\"$\",\"$Le\",null,{\"href\":\"/blog\",\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"aria-label\":\"Back to the blog\",\"children\":\"← Back to the blog\"}]}]]}]]}]]}]}]]}]]\n"])</script><script>self.__next_f.push([1,"12:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Fundamentals of C/C++ Multithreading Programming | CPlusPlusThings\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Troubleshooting multithreading issues with Linux commands\"}],[\"$\",\"meta\",\"4\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"5\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"6\",{\"rel\":\"canonical\",\"href\":\"https://light-city.github.io/blog/thread_debug_basic\"}],[\"$\",\"link\",\"7\",{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"https://light-city.github.io/feed.xml\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:title\",\"content\":\"Fundamentals of C/C++ Multithreading Programming\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:description\",\"content\":\"Troubleshooting multithreading issues with Linux commands\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:url\",\"content\":\"https://light-city.github.io/blog/thread_debug_basic\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:site_name\",\"content\":\"CPlusPlusThings\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:image\",\"content\":\"https://light-city.github.io/static/images/twitter-card.png\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"15\",{\"property\":\"article:published_time\",\"content\":\"2020-09-24T00:00:00.000Z\"}],[\"$\",\"meta\",\"16\",{\"property\":\"article:modified_time\",\"content\":\"2020-09-24T00:00:00.000Z\"}],[\"$\",\"meta\",\"17\",{\"property\":\"article:author\",\"content\":\"light-city\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:title\",\"content\":\"Fundamentals of C/C++ Multithreading Programming\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:description\",\"content\":\"Troubleshooting multithreading issues with Linux commands\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:image\",\"content\":\"https://light-city.github.io/static/images/twitter-card.png\"}],[\"$\",\"meta\",\"22\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"6:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>